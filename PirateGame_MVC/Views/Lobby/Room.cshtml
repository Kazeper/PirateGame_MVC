@using Microsoft.AspNetCore.Http;
@model SelectedRoomViewModel
@{
	ViewData["Title"] = "Room";
}
<script type="text/javascript">
	var playerNickname = '@Context.Session.GetString("playerNickname")';
	var roomId = @Model.RoomId;
</script>

<h6>Room : @Model.Room.RoomName</h6>

<br />
<br />

<div class="container">
	<div class="row">
		<div class="col-md-2">
			<div class="row">
				<h4 class="justify-content-center">Players</h4>
			</div>
			<div class="row" id="listOfPlayers">
				@foreach (Player player in Model.Room.Players)
				{
					<div class="col text-justify" id="@player.Nickname">@player.Nickname</div>
					<div class="ready-box"></div>
				}
			</div>
		</div>
		<div class="col-md-4 border border-warning mx-0 px-0">
			<span>drag&drop elements to set your gamefield</span>
			@{
				int index = 0;
				string imgPath;

				for (int i = 0; i < GameSettings.NumberOfRows; i++)
				{
					<div class="row no-gutters justify-content-center mx-0 px-0">

						@for (int j = 0; j < GameSettings.NumberOfColumns; j++)
						{
							<div id="@i _@j">

								@{
									imgPath = @Model.Player.GameField[index].ToString() + ".png";
								}
								<div id="_@index" class="img-fluid">
									<input asp-for="@Model.Player.GameField[index]" value="@Model.Player.GameField[index]" type="hidden" />
									<img id="@i -@j" class="img-fluid" src="~/resources/@imgPath" alt="" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)" />
								</div>

							</div>
							index++;
						}

					</div>
				}
			}
		</div>
		<partial name="_ChatPartial" />
	</div>
	<br />
	<div class="row">
		<div class="offset-2" col-md-2>
			<button class="btn-positive" id="ready-btn">Ready!</button>
		</div>
	</div>
</div>

@section Scripts
{
	<script src="~/js/setGameField.js"></script>
	<script src="~/js/signalr/dist/browser/signalr.js"></script>
	<script src="~/js/roomChat.js"></script>
	<script src="~/js/room.js"></script>
}